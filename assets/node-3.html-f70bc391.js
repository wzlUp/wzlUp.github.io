import{_ as s,p as a,q as t,s as n,Y as p}from"./framework-e1bed10d.js";const e={},c=n("div",{class:"custom-container tip"},[n("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 8h.01"}),n("path",{d:"M11 12h1v4h1"})])]),n("p",{class:"custom-container-title"},"博客简介"),n("p",null,"在 centos 服务器中安装 node 环境，本来以为没什么问题，该这么安装就怎么安装就可以了，结果来了个小插曲，服务器始终报异常 “无法执行二进制文件”，到底是什么情况呢，我们来详细看下什么原因")],-1),o=p(`<h2 id="一、下载源文件" tabindex="-1"><a class="header-anchor" href="#一、下载源文件" aria-hidden="true">#</a> 一、下载源文件</h2><p>在 node 管网下载源文件，选择你需要的版本，地址为 <code>https://nodejs.org/dist/v14.17.5/</code>，我选择的是 <code>14.17.5</code> 版本号。</p><p><img src="https://pic.smartasc.cn/blogPics/20230309211344.png" alt=""></p><h2 id="二、查看服务器内核" tabindex="-1"><a class="header-anchor" href="#二、查看服务器内核" aria-hidden="true">#</a> 二、查看服务器内核</h2><p>重点来了，由于我没有查看当前 centos 的版本号，导致我直接就下载了 linux-x64-tar.gz 格式的安装文件，结果始终是报异常 “无法执行二进制文件”。我在自己的腾讯云服务器安装没有任何问题，node 版本号可以直接进行查看，但是在公司的服务器就是不行。</p><p>查看服务器的内核信息，执行命令</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">uname</span> <span class="token parameter variable">-a</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>自己服务器：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-24-13-centos bin<span class="token punctuation">]</span><span class="token comment">#  uname -a</span>
Linux VM-24-13-centos <span class="token number">3.10</span>.0-1160.45.1.el7.x86_64 <span class="token comment">#1 SMP Wed Oct 13 17:20:51 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>公司服务器：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@ii-0001 src<span class="token punctuation">]</span><span class="token comment"># uname -a</span>
Linux ii-0001.novalocal <span class="token number">4.18</span>.0-193.28.1.el7.aarch64 <span class="token comment">#1 SMP Wed Oct 21 16:25:35 UTC 2020 aarch64 aarch64 aarch64 GNU/Linux</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><em><strong>原来是我没有根据服务器的内核下载适配的 node 源文件格式，应该下载 “linux-arm64.tar.gz ”格式的文件。</strong></em></p><h2 id="三、安装node" tabindex="-1"><a class="header-anchor" href="#三、安装node" aria-hidden="true">#</a> 三、安装node</h2><p>下载文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 进入到安装目录</span>
<span class="token builtin class-name">cd</span> /usr/local/src/
<span class="token comment"># 下载源文件</span>
<span class="token function">wget</span> https://nodejs.org/dist/v14.17.5/node-v14.17.5-linux-arm64.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>解压文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 执行完第一行命令会得到 tar 格式文件</span>
xz <span class="token parameter variable">-d</span> node-v14.17.5-linux-arm64.tar.gz
<span class="token comment"># 解压该文件</span>
<span class="token function">tar</span> xvf node-v14.17.5-linux-arm64.tar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>进入 ./node-v14.17.5-linux-arm64 文件夹，测试是否可执行 node 命令，./node-v14.17.5-linux-arm64/bin node -v，如果显示 node 的版本即可表示可正常使用。</p><p>编辑 profile</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> /etc/profile

在文件最后插入 <span class="token function">node</span> 环境变量路径

<span class="token comment"># node</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">NODE_HOME</span><span class="token operator">=</span>/usr/local/src/node-v14.17.5-linux-x64
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$NODE_HOME</span>/bin:<span class="token environment constant">$PATH</span>

<span class="token comment"># 更新环境配置</span>
<span class="token builtin class-name">source</span> /etc/profile

<span class="token comment"># 查看node版本号</span>
<span class="token punctuation">[</span>root@VM-24-13-centos bin<span class="token punctuation">]</span><span class="token comment"># node -v</span>
v14.17.5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="四、安装pm2" tabindex="-1"><a class="header-anchor" href="#四、安装pm2" aria-hidden="true">#</a> 四、安装pm2</h2><p>安装好 node 服务后，那么 npm 已经安装好了，我们使用 npm 来安装一下 pm2 服务</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> pm2 <span class="token parameter variable">-g</span> <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>执行结果如下所示表示安装成功：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>+ pm2@5.2.2
added <span class="token number">184</span> packages from <span class="token number">182</span> contributors <span class="token keyword">in</span> <span class="token number">197</span>.9s
<span class="token punctuation">[</span>root@VM-24-13-centos bin<span class="token punctuation">]</span><span class="token comment"># pm2 ls</span>

__/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>____/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>____________/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>____/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>_____
_<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>/////////<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>_<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>________/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>__/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>///////<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>___
  _<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>_______<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>_<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>//<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>____/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>//<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>_<span class="token punctuation">\\</span>///______<span class="token punctuation">\\</span>//<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>__
   _<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>/__<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>///<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>/_<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>___________/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>/___
    _<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>/////////____<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>__<span class="token punctuation">\\</span>///<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>/___<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>________/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>//_____
     _<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>_____________<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>____<span class="token punctuation">\\</span>///_____<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>_____/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>//________
      _<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>_____________<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>_____________<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>___/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>/___________
       _<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>_____________<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>_____________<span class="token punctuation">\\</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>__/<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span>_
        _<span class="token punctuation">\\</span>///______________<span class="token punctuation">\\</span>///______________<span class="token punctuation">\\</span>///__<span class="token punctuation">\\</span>///////////////__


                          Runtime Edition

        PM2 is a Production Process Manager <span class="token keyword">for</span> Node.js applications
                     with a built-in Load Balancer.

                Start and Daemonize any application:
                $ pm2 start app.js

                Load Balance <span class="token number">4</span> instances of api.js:
                $ pm2 start api.js <span class="token parameter variable">-i</span> <span class="token number">4</span>

                Monitor <span class="token keyword">in</span> production:
                $ pm2 monitor

                Make pm2 auto-boot at server restart:
                $ pm2 startup

                To go further checkout:
                http://pm2.io/


<span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> Spawning PM2 daemon with <span class="token assign-left variable">pm2_home</span><span class="token operator">=</span>/root/.pm2
<span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> PM2 Successfully daemonized
┌─────┬───────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ <span class="token function">id</span>  │ name      │ namespace   │ version │ mode    │ pid      │ <span class="token function">uptime</span> │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
└─────┴───────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,25),i=[c,o];function u(l,d){return a(),t("div",null,i)}const _=s(e,[["render",u],["__file","node-3.html.vue"]]);export{_ as default};
